### Story 1.5: Initial AI Plan Generation & Display
Status: drafted

As a new user who has completed onboarding,
I want to immediately see my first AI-generated "diagnostic" workout and meal plan on my dashboard,
So I can begin my health journey.

**Acceptance Criteria:** [Source: docs/sprint-artifacts/tech-spec-epic-1.md]

*   **Given** I have completed the onboarding flow
*   **When** my dashboard loads
*   **Then** a 7-day personalized workout and meal plan is generated by the AI (OpenAI GPT-4)
*   **And** the generated plan is displayed on the dashboard, similar to `dashboard_dark.html` (showing today's plan)
*   **And** the plan details are stored in the database

**Prerequisites:** Story 1.4

**Tasks:**
*   **Task 1.5.1:** Implement the AI plan generation service (`ai_plan_generator.py`). (AC: 1.5.1)
*   **Task 1.5.2:** Create the API endpoint to trigger the plan generation. (AC: 1.5.1)
*   **Task 1.5.3:** Integrate the database to store the generated plans. (AC: 1.5.3)
*   **Task 1.5.4:** Implement the frontend integration to display the plan on the dashboard. (AC: 1.5.2)
*   **Testing Subtasks:**
    *   Write an API test to validate the structure of the AI-generated plan. (AC: 1.5.1)
    *   Write an integration test to verify the generated plan is stored correctly in the database. (AC: 1.5.3)
    *   Write an E2E test to verify the plan is displayed correctly on the dashboard after onboarding. (AC: 1.5.2)

**Technical Notes:**
Backend service (`ai_plan_generator.py`) for AI interaction, API endpoint to trigger plan generation, database integration to store plans. Frontend integration to display on dashboard.

**Architecture patterns and constraints:**
*   Backend service for AI interaction with OpenAI GPT-4.
*   API endpoint for triggering plan generation.
*   Database integration for storing plans.
*   Frontend integration for displaying plans on dashboard.

**References:**
*   [Source: docs/epics.md]
*   [Source: docs/sprint-artifacts/tech-spec-epic-1.md]
*   [Source: docs/architecture-2025-11-30.md]
*   [Source: dashboard_dark.html - Assumed UI template]
*   [Source: ai_plan_generator.py - Backend service file]

---

### Dev Agent Record
*   **Context Reference:** Correcting story quality based on validation report.
*   **Agent Model Used:** Gemini
*   **Prompt:** Fix validation report issues for story-1.5.md.
*   **Output:** Updated story-1.5.md with missing sections and citations.
*   **Comments:** Added Status, AC Source, Tasks, Architecture patterns and constraints, References, Dev Agent Record, and Change Log.
*   **Completion Notes List:**
    *   [ ] Note 1
*   **File List:**
    *   [ ] `docs/stories/story-1.5.md` (MODIFIED)

---

### Change Log
*   **2025-12-02:** Added Status, AC Source, Tasks, Architecture patterns and constraints, References, Dev Agent Record, and Change Log sections based on validation report.
