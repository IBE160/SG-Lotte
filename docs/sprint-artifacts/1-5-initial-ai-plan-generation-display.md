# Story 1.5: Initial AI Plan Generation & Display

**Epic:** Epic 1: First Plan & Foundation
**User:** New User
**Value Statement:** As a new user who has completed onboarding, I want to immediately see my first AI-generated "diagnostic" workout and meal plan on my dashboard, so I can begin my health journey.

---

## 1. Requirements & Context

### 1.1. Requirements Summary

This story is about the initial generation and display of the user's personalized workout and meal plan. After the user completes the onboarding, the backend should trigger an AI service to generate a 7-day plan. This plan should then be stored in the database and displayed on the user's dashboard.

### 1.2. Source Documents

*   **Epics:** `docs/epics.md`
*   **Architecture:** `docs/architecture-2025-11-30.md`
*   **Wireframes:** `dashboard_dark.html` (conceptual)

---

## 2. Acceptance Criteria

| # | Given | When | Then |
|---|---|---|---|
| 1 | I have completed the onboarding flow | My dashboard loads | A 7-day personalized workout and meal plan is generated by the AI (OpenAI GPT-4) |
| 2 | A plan has been generated | My dashboard loads | The generated plan is displayed on the dashboard, similar to `dashboard_dark.html` |
| 3 | A plan has been generated | | The plan details are stored in the database |

---

## 3. Implementation Plan

### 3.1. Task Breakdown

| Task ID | Description | Est. Time |
|---|---|---|
| 1.5.1 | Create the backend service (`ai_plan_generator.py`) to interact with the OpenAI GPT-4 API. | 4h |
| 1.5.2 | Implement the API endpoint to trigger the plan generation. | 2h |
| 1.5.3 | Integrate the plan generation with the database to store the generated plans. | 2h |
| 1.5.4 | Implement the frontend dashboard component to display the plan. | 4h |
| 1.5.5 | Write tests for the plan generation and display. | 3h |

### 3.2. Developer Notes

*   The interaction with the OpenAI API is a core part of this story. Ensure that the prompts are well-defined to get the desired output.
*   The dashboard UI should be based on the `dashboard_dark.html` wireframe concept.
*   Error handling is important, especially for the AI service interaction.

---

## 4. Validation

### 4.1. Validation Checklist

*   [ ] 7-day plan is generated after onboarding.
*   [ ] Plan is displayed on the dashboard.
*   [ ] Plan is stored in the database.

### 4.2. Review

*   **Completed by:**
*   **Date:**
*   **Outcome:**

---

## 5. Change Log

| Version | Date | Author | Change |
|---|---|---|---|
| 1.0 | 2025-12-02 | sm | Initial draft |
