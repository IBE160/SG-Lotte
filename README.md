# AI Fitness & Meal Planner

## Project Title

**AI Fitness & Meal Planner**

## Description

This project is an AI-driven web application designed to help users achieve their fitness and meal planning goals. It leverages AI to generate and dynamically adapt personalized workout and meal plans based on user preferences and logged progress. The application features user authentication, a guided onboarding process, daily plan visualization, workout and meal logging, progress tracking, and in-app notifications.

## Features

-   **User Authentication:** Secure user registration, login, and email verification powered by Supabase Auth.
-   **Guided Onboarding:** A multi-step onboarding process to collect user fitness goals, dietary preferences, and fitness persona.
-   **AI-Driven Plan Generation:** Personalized 7-day workout and meal plans generated by an AI model (Gemini 2.5).
-   **Daily Plan Visualization:** Display of daily workout and meal plans on an interactive dashboard.
-   **Workout Logging:** Users can mark workouts as "Completed" or "Skipped" and rate perceived difficulty.
-   **Meal Logging:** Users can mark meals as "Eaten" or "Skipped."
-   **Progress Visualization:** Dashboard displays workout streaks and weight trends.
-   **In-App Notifications:** Users are notified about new plans and important updates.
-   **User Profile & Settings:** Dedicated pages for managing user profiles, application settings (e.g., dark mode), and account management (password change, email change, account deletion).
-   **Adaptive Planning Logic:** AI-driven weekly plan adaptation based on logged user activity and feedback.

## Getting Started

Follow these instructions to set up and run the project locally.

### Prerequisites

Before you begin, ensure you have the following installed on your system:

-   **Git:** For cloning the repository.
-   **Node.js (LTS recommended):** Includes `npm` for frontend package management.
-   **Python 3.10+:** For the backend development.
-   **`uv`:** A fast Python package installer and resolver. Install with `pip install uv`.

### Cloning the Repository

```bash
git clone https://github.com/IBE160/SG-Lotte.git
cd SG-Lotte
```

### Git LFS

This project uses Git Large File Storage (LFS) for handling large files, particularly in the `.logging` directory. Ensure you have Git LFS installed and configured.

1.  **Install Git LFS:**
    ```bash
    git lfs install
    ```
2.  **Pull LFS objects:**
    ```bash
    git lfs pull
    ```

## Installation

The project consists of two main parts: a FastAPI backend (Python) and a Next.js frontend (TypeScript/React).

### 1. Backend Setup

1.  Navigate to the `backend` directory:
    ```bash
    cd backend
    ```
2.  Create and activate a Python virtual environment using `uv`:
    ```bash
    uv venv
    .\.venv\Scripts\activate # On Windows
    # source ./.venv/bin/activate # On macOS/Linux
    ```
3.  Install backend dependencies:
    ```bash
    uv pip install -r requirements.txt
    ```
4.  **Environment Variables:**
    Create a `.env` file in the `backend/` directory (at `SG-Lotte/backend/.env`) and add the following:
    ```
    SUPABASE_URL="YOUR_SUPABASE_PROJECT_URL"
    SUPABASE_SERVICE_ROLE_KEY="YOUR_SUPABASE_SERVICE_ROLE_KEY"
    GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
    ```
    **CRITICAL SECURITY NOTE:** `SUPABASE_SERVICE_ROLE_KEY` should be handled with extreme care. It grants full administrative privileges to your Supabase project. For authenticated user operations, this key should **never** be exposed to the client-side or used directly. Ensure your backend logic correctly manages user authentication without relying on the service role key for client-driven requests.

### 2. Frontend Setup

1.  Navigate to the `frontend` directory:
    ```bash
    cd frontend
    ```
2.  Install frontend dependencies:
    ```bash
    npm install
    ```
3.  **Environment Variables:**
    Create a `.env.local` file in the `frontend/` directory (at `SG-Lotte/frontend/.env.local`) and add the following:
    ```
    NEXT_PUBLIC_SUPABASE_URL="YOUR_SUPABASE_PROJECT_URL"
    NEXT_PUBLIC_SUPABASE_ANON_KEY="YOUR_SUPABASE_ANON_KEY"
    NEXT_PUBLIC_API_URL="http://localhost:8000" # Or your deployed backend URL
    ```
    **Note:** `NEXT_PUBLIC_SUPABASE_ANON_KEY` is the public API key for your Supabase project. `NEXT_PUBLIC_API_URL` should point to your backend's API endpoint.

## Running the Application

Ensure both your backend and frontend are running.

### 1. Start the Backend

1.  Navigate to the `backend` directory and activate your virtual environment.
2.  Run the FastAPI application:
    ```bash
    uvicorn app.main:app --reload
    ```
    The backend will typically run on `http://localhost:8000`.

### 2. Start the Frontend

1.  Navigate to the `frontend` directory.
2.  Run the Next.js development server:
    ```bash
    npm run dev
    ```
    The frontend will typically run on `http://localhost:3000`.

## Database Setup (Supabase)

This project uses Supabase as its backend-as-a-service, providing a PostgreSQL database, authentication, and more.

1.  **Create a Supabase Project:**
    -   Go to [Supabase](https://supabase.com/) and create a new project.
2.  **Get API Keys:**
    -   In your Supabase project dashboard, navigate to "Project Settings" -> "API".
    -   Copy your `Project URL` (this is your `SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_URL`).
    -   Copy your `anon public` key (this is your `NEXT_PUBLIC_SUPABASE_ANON_KEY`).
    -   Copy your `service_role` key (this is your `SUPABASE_SERVICE_ROLE_KEY`).
3.  **Database Schema (Alembic):**
    -   The backend uses Alembic for database migrations. You will need to apply the initial migrations to set up tables like `users`, `user_profiles`, `workout_logs`, `meal_logs`, and `notifications`. (Detailed Alembic commands are outside the scope of this `README`, but typically involve `alembic upgrade head`).
4.  **Row Level Security (RLS):**
    -   RLS is expected to be enabled on all tables (e.g., `user_profiles`, `workout_logs`, `meal_logs`, `notifications`) to ensure users can only access and modify their own data. Appropriate RLS policies must be configured in your Supabase project.

## Testing

### Backend Tests

1.  Navigate to the `backend` directory and activate your virtual environment.
2.  Run tests using `pytest`:
    ```bash
    pytest
    ```

### Frontend Tests

1.  Navigate to the `frontend` directory.
2.  Run tests using `npm`:
    ```bash
    npm test
    ```

## Contributing

Please refer to the project's internal documentation and task management system for contribution guidelines.

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.